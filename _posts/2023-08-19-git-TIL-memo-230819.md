---
layout: single
title:  "Git TIL 메모 (230819) - hooks, submodule"
categories: git
tag: []
---

※ 본 내용은 얄코 님의 유료 강의를 수강하고 개인적으로 추가 조사하며 공부 목적으로 정리한 글입니다.  
(출처: [원본 인프런 강의](https://www.inflearn.com/course/%EC%A0%9C%EB%8C%80%EB%A1%9C-%ED%8C%8C%EB%8A%94-%EA%B9%83#))  

## Git Hooks
- 일종의 자동화. 어떤 이벤트마다 자동으로 실행될 스크립트를 지정한다. 
    - ex. 커밋을 할 때마다 자동으로 푸쉬
    - ex2. 커밋하기 전에 코드 검사
- .git 폴더 안에 hooks 폴더를 보면 샘플이 들어있다.
    - 각 샘플 파일의 이름은 해당 샘플이 언제 실행되는지 나타낸다. (ex. pre-commit은 커밋 명령어 입력 직후, 커밋이 이루어지기 전)
    - 해당 샘플 파일을 열면 예시 명령어가 적혀 있다.
    - 샘플 파일의 `.sample` 확장자를 지우고 저장하면 실행 시 바로 작동하는 스크립트 파일이 된다.
- 일단은 위 샘플 또는 외부에서 제공하는 스크립트 파일을 통해 Hooks 세팅을 하고, 나중에 쉘 스크립트 등을 배운 후 내 마음대로 커스텀하여 사용해보자.


## Git Submodules
- 프로젝트 안에 또 다른 서브 프로젝트가 있어야 할 때 사용
    - ex. 어떤 라이브러리가 여러 프로젝트에서 함께 사용되는 것 등
- `git submodule add (서브모듈의 원격 repo 주소) (하위 폴더명)`: 해당 원격 주소의 repository 를 명령어가 수행되는 디렉토리(메인 프로젝트)의 서브 모듈로 받아옴
    - 하위 폴더명은 생략 가능
    - 해당 서브모듈 repo 이름으로 폴더가 생성되어 그 안에 내용물이 들어가고, 추가로 .gitmodules 라는 파일도 하나 생성된다.
    - 모든 변경사항은 stage 단계까지 올라간 상태이므로 commit 까지 하여 완료해주자.
- 서브모듈의 변경사항은 `git add .`으로 스테이지되거나 `git commit`으로 커밋할 수 없다. (메인 프로젝트 변경사항에만 작동)
    - 다만 `git status` 를 통해 서브모듈이 로컬에서 변경됐다는 것은 확인 가능하다.
- 서브모듈의 변경사항에 대한 git 작업을 하고 싶다면 터미널에서 해당 서브모듈 폴더로 이동해야 한다.
- **서브모듈에 새로운 커밋이 생기면 메인 프로젝트에서 서브모듈의 폴더가 변경사항으로 잡힌다.**
    - 어떤 의미인지 정확히 모르겠지만, 그냥 메인 프로젝트에서 서브 프로젝트의 커밋도 함께 관리한다는 느낌인 것으로 보인다.
- 메인 프로젝트의 원격 repo 를 다른 곳에서 clone 해보면 서브모듈 폴더의 파일들은 없다는 것을 알 수 있다.
    - 메인 프로젝트 파일들과 .gitmodules 파일은 정상적으로 들어온다.
    - 서브 모듈이 다양한 프로젝트는 첫 클론이 너무 무거워질 수 있으므로 용도에 따라 가볍게 쓸 수 있도록 처음에는 서브모듈을 받아오지 않는 것이다.
    - `git submodule init (서브모듈 이름)`: 해당 서브모듈을 초기화, 등록
        - 서브모듈 이름을 생략하면 전체 서브모듈을 모두 초기화, 등록
        - 서브모듈 이름은 .gitmodules 파일에서 확인하면 된다.
    - `git submodule update`: 서브모듈 내용물을 받아온다.
    - `git submodule update --remote`: 서브모듈이 외부에서 변경되었을 경우 해당 변경사항을 받아옴
        - 만약 서브모듈이 중첩되어 있다면(서브모듈 안에 또 다른 서브모듈이 있는 경우) `--recursive` 명령어를 추가하면 된다.


## 기타 팁
- git 명령어 두 개를 한 줄에 사용하고 싶으면 `;`(세미콜론)으로 구분해주면 된다.
    - ex. `git commit -m 'Edit'; git push`


