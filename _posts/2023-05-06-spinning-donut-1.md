---
layout: single
title:  "Spinning Donut 구현 (1)"
categories: coding
tag: [cpp, graphics]
toc: true
---

본 포스트에서는 Spinning Donut 을 구현하는 데 필요한 준비 지식을 간단하게 소개한다.
  
# 준비 지식

## 1. 빛 세기를 표현하는 문자

콘솔 창에 현실 물체의 어떤 그래픽 적인 표현을 한다는 것은 결국 그 물체에 비치는 빛의 세기에 따라 다른 문자를 채워 넣는 것이다. 이 때 문자에 여백이 적을 수록 더 밝은 빛으로 느껴지기 때문에 이를 이용해서 어느 정도 디테일한 표현을 할 수 있게 된다.  
예를 들어, 마침표(.) 문자는 골뱅이(@) 문자보다 표현에 차지하는 넓이가 훨씬 작아 여백이 많기 때문에 더 어두운 색으로 느껴진다. 모든 문자를 하나하나 써보고 결정하는 것은 쉽지 않으므로, 그냥 전에 언급한 영상에서 알려준 데이터를 사용했다.  

```cpp
char pixel[13] = { ' ', '.', ',', '-', '~', ':', ';', '=', '!', '*', '#', '$', '@' };
```

그런데 만약 문자들 간의 가로 길이가 다르다면 일정한 간격의 격자 표현이 힘들어질텐데, 다행이 콘솔 창은 모든 문자가 같은 너비를 차지하는 폰트를 사용하여 그런 문제가 없었다.  
![image](https://jm911.github.io/assets/images/230506/1.png)  

## 2. Phong 반사 모델

이제 실제 물체에서 빛이 어떻게 비춰지는가에 대한 연산이 필요하다. spinning donut 구현 전체에서 이것이 가장 핵심인데, 사실 여기에서 막혀 chat gpt 에 도움을 구했다.  
Phong 반사 모델이라는 것을 사용한다고 하여 찾아보니 부끄럽게도 내가 그래픽스 기초를 공부할 때 배웠던 건데 잊어버리고 있었다...  

![image](https://jm911.github.io/assets/images/230506/2.png)  

Phong 반사 모델은 빛을 Ambient, Diffuse, Specular 의 세 가지로 나누어 물체의 각 픽셀을 세 항목의 단순 합으로 표현하는 모델이다.  
Ambient 는 그 곳에 물체가 존재한다는 사실을 인지할 수 있게 하는 최소한의 빛이다. 아마 현실에서는 여러 물체들의 반사광 등이 합쳐져 그렇게 보이는 것이겠지만, 그래픽스에서는 간단하게 한 가지 세기로만 표현한다.  
Diffuse 는 태양처럼 먼 거리에서 일직선으로 쏟아지는 빛이다. Directional Light 와 같다. 물체의 형태, 빛의 방향에 따라 빛을 받는 세기가 달라지므로 물체의 표면 노멀 벡터와 빛의 방향 벡터를 통해 계산한다.  
Specular는 전구처럼 한 점에서 나오는 빛으로, Point light 로 쓰인다. 빛의 위치, 물체의 노멀 벡터와 더불어 관찰자의 위치 까지 영향을 받으므로, 세 가지 중에 계산이 가장 복잡하다.  
  
사실 세 가지 모두 어려운 계산은 아니지만, 일단은 Specular 를 제외한 두 가지만으로 아주 간단하게 구현해보고자 한다.  
아무래도 12가지 색만 가지고 표현하다 보니 굳이 세밀한 표현까지는 어차피 잘 안나올 것 같아 이렇게 결정했다. 추후 뭔가 아쉽거나 하면 추가하자.  
  
본 포스트에서 구체 구현까지 넣으려고 했는데 조금 길어져서 그냥 다음 포스트로 넘긴다.

